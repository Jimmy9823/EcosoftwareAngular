<form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="auth-form">

  <div class="row g-3">

    <ng-container *ngFor="let field of fields">

      <!-- SEPARADOR -->
      <div *ngIf="field.type === 'separator'" class="col-12">
        <div class="form-separator">{{ field.label }}</div>
      </div>

      <!-- CAMPOS -->
      <div *ngIf="field.type !== 'separator'" [class]="'col-12 col-md-' + (field.cols || 12)">
        <div class="form-group">

          <label *ngIf="field.label">{{ field.label }}</label>

          <!-- INPUT -->
          <input *ngIf="['text','email','password','number','date'].includes(field.type)"
            [type]="field.type"
            class="form-input"
            [formControlName]="field.name"
            [placeholder]="field.placeholder || ''"
          />

          <!-- TEXTAREA -->
          <textarea *ngIf="field.type === 'textarea'"
            class="form-input"
            [rows]="field.rows || 3"
            [formControlName]="field.name">
          </textarea>

          <!-- SELECT -->
          <select *ngIf="field.type === 'select'"
            class="form-input"
            [formControlName]="field.name">
            <option value="" disabled selected>
              {{ field.placeholder || 'Seleccione' }}
            </option>
            <option *ngFor="let opt of field.options" [value]="opt.value">
              {{ opt.text }}
            </option>
          </select>

          <!-- RADIO -->
          <div *ngIf="field.type === 'radio'">
            <div class="role-section">
              <h3>{{ field.label }}</h3>

              <div class="d-flex flex-wrap gap-3">
                <label *ngFor="let opt of field.options" class="form-check">
                  <input type="radio"
                    [value]="opt.value"
                    [formControlName]="field.name" />
                  {{ opt.text }}
                </label>
              </div>
            </div>
          </div>

          <!-- ERROR -->
          <div class="error"
            *ngIf="formGroup.get(field.name)?.invalid && formGroup.get(field.name)?.touched">
            {{ field.errorMessage || 'Campo inválido' }}
          </div>

        </div>
      </div>

    </ng-container>

  </div>

  <!-- BOTÓN -->
  <div class="text-end mt-4" *ngIf="showSubmitButton">
    <app-boton
      tipo="submit"
      [color]="submitButtonColor"
      [size]="submitButtonSize"
      [hoverColor]="submitButtonHoverColor"
      [deshabilitado]="formGroup.invalid"
      [icono]="'bi bi-check-lg'"
      [texto]="submitButtonText">
    </app-boton>
  </div>

</form>
