<!-- ===================== REGISTRO ===================== -->
<form *ngIf="mode === 'registro'" [formGroup]="registroForm" (ngSubmit)="onSubmit()" [ngClass]="selectedRol">
  <h2>Registro de {{ selectedRol | titlecase }}</h2>

  <!-- Selector de Rol -->
  <label for="rol">Selecciona Rol</label>
  <select id="rol" formControlName="rol" (change)="onRolChange($event)">
    <option value="ciudadano">Ciudadano</option>
    <option value="reciclador">Reciclador</option>
    <option value="empresa">Empresa</option>
    <option value="admin">Administrador</option>
  </select>

  <!-- ===================== CAMPOS CIUDADANO ===================== -->
  <div *ngIf="selectedRol === 'ciudadano'">
    <input type="text" placeholder="Nombre completo" formControlName="nombre">

    <input type="text" placeholder="Cédula" formControlName="cedula">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('cedula')">{{ msg }}</div>

    <input type="email" placeholder="Correo" formControlName="correo">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('correo')">{{ msg }}</div>

    <input type="text" placeholder="Teléfono" formControlName="telefono">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('telefono')">{{ msg }}</div>

    <input type="text" placeholder="Dirección" formControlName="direccion">
    <input type="text" placeholder="Barrio" formControlName="barrio">
    <input type="text" placeholder="Localidad" formControlName="localidad">

    <input type="password" placeholder="Contraseña" formControlName="contrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('contrasena')">{{ msg }}</div>

    <input type="password" placeholder="Validar Contraseña" formControlName="validarContrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('validarContrasena')">{{ msg }}</div>
  </div>

  <!-- ===================== CAMPOS RECICLADOR ===================== -->
  <div *ngIf="selectedRol === 'reciclador'">
    <input type="text" placeholder="Nombre" formControlName="nombre">

    <input type="text" placeholder="Cédula" formControlName="cedula">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('cedula')">{{ msg }}</div>

    <input type="email" placeholder="Correo" formControlName="correo">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('correo')">{{ msg }}</div>

    <input type="text" placeholder="Teléfono" formControlName="telefono">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('telefono')">{{ msg }}</div>

    <input type="text" placeholder="Zona de trabajo" formControlName="zonaTrabajo">
    <input type="text" placeholder="Horario de trabajo" formControlName="horarioTrabajo">
    <input type="number" placeholder="Cantidad mínima de residuos" formControlName="cantidadMinima">

    <label>Tipo de material:</label>
    <div class="checkbox-list">
      <label *ngFor="let tipo of tiposMaterial">
        <input type="checkbox" [value]="tipo" (change)="onTipoMaterialChange($event)"> {{ tipo }}
      </label>
    </div>

    <div *ngIf="mostrarOtrosMateriales">
      <input type="text" placeholder="Otros materiales" formControlName="otrosMateriales">
    </div>

    <input type="password" placeholder="Contraseña" formControlName="contrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('contrasena')">{{ msg }}</div>

    <input type="password" placeholder="Validar Contraseña" formControlName="validarContrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('validarContrasena')">{{ msg }}</div>
  </div>

  <!-- ===================== CAMPOS EMPRESA ===================== -->
  <div *ngIf="selectedRol === 'empresa'">
    <input type="text" placeholder="Nombre de la empresa" formControlName="nombre">
    <input type="text" placeholder="NIT" formControlName="nit">
    <input type="text" placeholder="Representante legal" formControlName="representanteLegal">
    <input type="text" placeholder="Cédula" formControlName="cedula">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('cedula')">{{ msg }}</div>

    <input type="email" placeholder="Correo" formControlName="correo">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('correo')">{{ msg }}</div>

    <input type="text" placeholder="Teléfono" formControlName="telefono">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('telefono')">{{ msg }}</div>

    <input type="text" placeholder="Dirección" formControlName="direccion">
    <input type="text" placeholder="Barrio" formControlName="barrio">
    <input type="text" placeholder="Localidad" formControlName="localidad">
    <input type="text" placeholder="Horario de operación" formControlName="horario">
    <input type="number" placeholder="Cantidad mínima de residuos" formControlName="cantidadMinima">

    <label>Tipo de material:</label>
    <div class="checkbox-list">
      <label *ngFor="let tipo of tiposMaterial">
        <input type="checkbox" [value]="tipo" (change)="onTipoMaterialChange($event)"> {{ tipo }}
      </label>
    </div>

    <div *ngIf="mostrarOtrosMateriales">
      <input type="text" placeholder="Otros materiales" formControlName="otrosMateriales">
    </div>

    <input type="password" placeholder="Contraseña" formControlName="contrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('contrasena')">{{ msg }}</div>

    <input type="password" placeholder="Validar Contraseña" formControlName="validarContrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('validarContrasena')">{{ msg }}</div>
  </div>

  <!-- ===================== CAMPOS ADMIN ===================== -->
  <div *ngIf="selectedRol === 'admin'">
    <input type="text" placeholder="Nombre completo" formControlName="nombre">

    <input type="text" placeholder="Cédula" formControlName="cedula">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('cedula')">{{ msg }}</div>

    <input type="email" placeholder="Correo" formControlName="correo">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('correo')">{{ msg }}</div>

    <input type="text" placeholder="Teléfono" formControlName="telefono">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('telefono')">{{ msg }}</div>

    <input type="password" placeholder="Contraseña" formControlName="contrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('contrasena')">{{ msg }}</div>

    <input type="password" placeholder="Validar Contraseña" formControlName="validarContrasena">
    <div class="error-msg" *ngFor="let msg of getErrorMessages('validarContrasena')">{{ msg }}</div>
  </div>

  <button type="submit">Registrar</button>
</form>

<!-- ===================== LOGIN ===================== -->
<form *ngIf="mode === 'login'" [formGroup]="loginForm" (ngSubmit)="onSubmit()" class="login-form">
  <h2>Iniciar Sesión</h2>
  <input type="email" placeholder="Correo electrónico" formControlName="correo">
  <div class="error-msg" *ngFor="let msg of getErrorMessages('correo')">{{ msg }}</div>

  <input type="password" placeholder="Contraseña" formControlName="contrasena">
  <div class="error-msg" *ngIf="isFieldInvalid(loginForm, 'contrasena')">La contraseña es obligatoria.</div>

  <button type="submit">Entrar</button>
</form>

<!-- ===================== FILTRO ===================== -->
<form *ngIf="mode === 'filtro'" [formGroup]="filtroForm" (ngSubmit)="onSubmit()" class="filter-form">
  <h2>Filtrar</h2>
  <select formControlName="criterio">
    <option value="correo">Correo</option>
    <option value="nombre">Nombre</option>
    <option value="documento">Documento</option>
  </select>
  <input type="text" placeholder="Valor a filtrar" formControlName="valor">
  <button type="submit">Buscar</button>
</form>
