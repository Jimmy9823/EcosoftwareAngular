<form [formGroup]="formGroup" (ngSubmit)="onSubmit()" class="auth-form">

  <ng-container *ngFor="let field of fields" >
    <ng-container *ngIf="shouldShow(field)">

      <!-- SEPARADOR -->
      <div *ngIf="field.type === 'separator'" class="form-separator">
        {{ field.label }}
      </div>

      <!-- CAMPOS -->
      <div *ngIf="field.type !== 'separator'" 
           class="form-group"
           [ngClass]="{
             'full': !field.cols || field.cols === 12,
             'half': field.cols === 6,
             'third': field.cols === 4
           }">

        <label>{{ field.label }}</label>

        <input *ngIf="field.type === 'text' || field.type === 'email' || field.type === 'password'"
               [type]="field.type"
               class="form-input"
               [formControlName]="field.name!"
               [placeholder]="field.placeholder || ''" />

        <select *ngIf="field.type === 'select'" 
                class="form-input"
                [formControlName]="field.name!">
          <option value="" disabled selected>Seleccione una opción</option>
          <option *ngFor="let opt of field.options!" [value]="opt.value!">
            {{ opt.text }}
          </option>
        </select>

        <textarea *ngIf="field.type === 'textarea'"
                  class="form-input"
                  rows="3"
                  [formControlName]="field.name!"></textarea>

        <input *ngIf="field.type === 'date'"
               type="date"
               class="form-input"
               [formControlName]="field.name!" />

        <div *ngIf="field.type === 'radio'" class="form-radio-group">
          <div *ngFor="let opt of field.options!" class="radio-option">
            <input type="radio" 
                   [value]="opt.value!" 
                   [id]="field.name! + opt.value!" 
                   [formControlName]="field.name!" />
            <label [for]="field.name! + opt.value!">{{ opt.text }}</label>
          </div>
        </div>

        <div class="error" *ngIf="formGroup.get(field.name!)?.invalid && formGroup.get(field.name!)?.touched">
          Campo inválido
        </div>

      </div>

    </ng-container>
  </ng-container>

  <div class="form-button" *ngIf="showSubmitButton">
    <app-boton
      [texto]="submitButtonText"
      [icono]="submitButtonIcon"
          [color]="submitButtonColor"   

      size="md"
      tipo="submit"
      [deshabilitado]="formGroup.invalid || disableSubmit">
    </app-boton>
  </div>

  <ng-content select="[form-footer]"></ng-content>

</form>
