<div class="container mt-3">
  <h4 class="text-center"></h4>

  <!-- ✅ Mensajes de carga o error -->
  <div *ngIf="cargando" class="text-center">Cargando...</div>
  <div *ngIf="error" class="alert alert-danger">{{ error }}</div>

  <!-- ✅ Mostrar tabla solo si hay datos -->
<app-tabla
  *ngIf="!cargando && data.length > 0"
  [titulo]="'Listado de Capacitaciones'"
  [columnas]="columnas"
  [data]="data"
  (ver)="abrirModalVerCapacitacion($event)"
  (editar)="editar($event)"
  (eliminar)="eliminar($event)">
</app-tabla>


  <!-- ✅ Sin datos -->
  <p *ngIf="!cargando && data.length === 0" class="text-center">
    No hay capacitaciones registradas.
  </p>
</div>
<app-modal
  #modalVerCapacitacion
  [title]="'Detalles de la Capacitación'"
  [headerColor]="'#4f69d9'"
  [isOpen]="false"
>

  <div class="p-3 modal-perfil-container">

    <!-- ENCABEZADO -->
    <div class="text-center mb-4">

      <h3 class="mt-2 mb-0">
        {{ selectedCapacitacion?.nombre || 'Sin nombre' }}
      </h3>

      <small class="text-muted">
        ID: {{ selectedCapacitacion?.id || '---' }}
      </small>
    </div>

    <!-- IMAGEN -->
    <div class="text-center mb-4">
      <ng-container *ngIf="selectedCapacitacion?.imagen; else noImage">
        <img 
          [src]="selectedCapacitacion?.imagen"
          alt="Imagen de capacitación"
          class="img-fluid rounded shadow"
          style="max-height: 250px; object-fit: cover;"
        />
      </ng-container>

      <ng-template #noImage>
        <div class="text-muted fst-italic">Sin imagen disponible</div>
      </ng-template>
    </div>

    <!-- INFORMACIÓN GENERAL -->
    <h5 class="section-title">Información general</h5>

    <div class="row mb-3">
      <div class="col-6">
        <label class="fw-bold">Número de clases:</label>
        <div>{{ selectedCapacitacion?.numeroDeClases || 'No definido' }}</div>
      </div>

      <div class="col-6">
        <label class="fw-bold">Duración:</label>
        <div>{{ selectedCapacitacion?.duracion || 'No definida' }}</div>
      </div>
    </div>

    <div class="mb-3">
      <label class="fw-bold">Descripción:</label>
      <div>{{ selectedCapacitacion?.descripcion || 'Sin descripción' }}</div>
    </div>

  

    

    <ng-template #noModules>
      <div class="text-muted fst-italic">Esta capacitación no tiene módulos registrados.</div>
    </ng-template>

  </div>

</app-modal>

<app-modal
  #modalEditarCapacitacion
  [title]="'Editar Capacitación'"
  [headerColor]="'#ffc107'"
  [isOpen]="false"
>
  <div class="p-3">
    <app-form-comp
      *ngIf="capacitacionSeleccionada"
      [formGroup]="formEditarCapacitacion"
      [fields]="fieldsEditarCapacitacion"
      [submitButtonText]="'Actualizar'"
      [submitButtonIcon]="'bi bi-save'"
      [submitButtonColor]="'custom-success-filled'"
      (submitForm)="actualizarCapacitacion()"
      [showSubmitButton]="true">
    </app-form-comp>
  </div>
  <ng-container modal-footer>
    
  </ng-container>
</app-modal>

<app-modal
  #modalEliminarCapacitacion
  [title]="'Eliminar Capacitación'"
  [headerColor]="'#dc3545'"
  [isOpen]="false"
>
  <div class="p-3">
    <p>¿Está seguro que desea eliminar la capacitación <strong>{{ capacitacionSeleccionada?.nombre }}</strong>?</p>
  </div>
  <ng-container modal-footer>
    <div class="d-flex justify-content-end gap-2">
      <app-boton texto="Cancelar" icono="bi bi-x-circle" color="custom-gray-filled" (click)="cerrarModalEliminarCapacitacion()"></app-boton>
      <app-boton texto="Eliminar" icono="bi bi-trash" color="custom-danger-filled" (click)="confirmarEliminarCapacitacion()"></app-boton>
    </div>
  </ng-container>
</app-modal>
